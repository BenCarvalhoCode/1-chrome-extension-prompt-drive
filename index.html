<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prompt Drive</title>
  <link rel="stylesheet" href="app/styles/main.css">
  <link rel="stylesheet" href="app/styles/components/index.css">
  <link rel="stylesheet" href="app/styles/responsive.css">
</head>
<body>
  <div class="app" id="app">
    <!-- =========================
        Login (sem token)
    ========================= -->
    <div class="auth-screen" id="loginScreen" aria-hidden="true" hidden>
      <div class="auth-screen__card">
        <div class="auth-screen__brand">
          <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32' fill='none'%3E%3Crect x='4' y='6' width='24' height='20' rx='2.5' stroke='%2300e676' stroke-width='1.8'/%3E%3Cpath d='M4 12h24' stroke='%2300e676' stroke-width='1.8'/%3E%3Cpath d='M10 18h8' stroke='%2300e676' stroke-opacity='.7' stroke-width='1.5'/%3E%3C/svg%3E" alt="" class="auth-screen__logo" width="40" height="40">
          <div class="auth-screen__brand-text">
            <h1 class="auth-screen__title">Prompt <span class="auth-screen__title-accent">DRIVE</span></h1>
            <p class="auth-screen__subtitle">Organize seus prompts</p>
          </div>
        </div>
        <form id="loginForm" class="auth-screen__form" data-action="submit-login">
          <div class="form-group">
            <label for="loginEmail">E-mail</label>
            <input type="email" id="loginEmail" name="email" required autocomplete="email" placeholder="seu@email.com">
          </div>
          <div class="form-group">
            <label for="loginPassword">Senha</label>
            <input type="password" id="loginPassword" name="password" required autocomplete="current-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
          </div>
          <div class="auth-screen__actions">
            <button type="submit" class="btn btn--primary btn--block">Entrar</button>
            <button type="button" class="btn btn--ghost btn--block" data-action="show-create-account">Criar nova conta</button>
          </div>
        </form>
      </div>
    </div>

    <!-- =========================
        Criar conta
    ========================= -->
    <div class="auth-screen" id="createAccountScreen" aria-hidden="true" hidden>
      <div class="auth-screen__card">
        <div class="auth-screen__brand">
          <h2 class="auth-screen__title">Criar conta</h2>
        </div>
        <form id="createAccountForm" class="auth-screen__form" data-action="submit-create-account">
          <div class="form-group">
            <label for="createName">Nome</label>
            <input type="text" id="createName" name="full_name" required autocomplete="name" placeholder="Seu nome">
          </div>
          <div class="form-group">
            <label for="createEmail">E-mail</label>
            <input type="email" id="createEmail" name="email" required autocomplete="email" placeholder="seu@email.com">
          </div>
          <div class="form-group">
            <label for="createPassword">Senha</label>
            <input type="password" id="createPassword" name="password" required autocomplete="new-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
          </div>
          <div class="auth-screen__actions">
            <button type="submit" class="btn btn--primary btn--block">Criar conta</button>
            <button type="button" class="btn btn--ghost btn--block" data-action="show-login">Voltar ao login</button>
          </div>
        </form>
      </div>
    </div>

    <!-- =========================
        App (header + main + footer) ‚Äî vis√≠vel quando autenticado
    ========================= -->
    <div id="appContent" class="app-content" aria-hidden="true" hidden>
    <!-- =========================
        Header
    ========================= -->
    <header class="header">
      <div class="header__left">
        <div class="header__brand">
          <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32' fill='none'%3E%3Crect x='4' y='6' width='24' height='20' rx='2.5' stroke='%2300e676' stroke-width='1.8'/%3E%3Cpath d='M4 12h24' stroke='%2300e676' stroke-width='1.8'/%3E%3Cpath d='M10 18h8' stroke='%2300e676' stroke-opacity='.7' stroke-width='1.5'/%3E%3C/svg%3E" alt="" class="header__logo" width="32" height="32">
          <div class="header__brand-text">
            <h1 class="header__title">Prompt <span class="header__title-accent">Drive</span></h1>
            <p class="header__subtitle">Organize seus prompts</p>
          </div>
        </div>
      </div>
      <div class="header__center">
        <div class="header__search-wrap">
          <svg class="header__search-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/>
          </svg>
          <input type="search" id="searchPrompts" class="header__search" placeholder="Buscar prompts..." aria-label="Buscar prompts" autocomplete="off">
        </div>
      </div>
      <div class="header__right">
        <button type="button" id="btnCreateFolder" class="btn btn--ghost btn--with-icon" title="Criar nova pasta" aria-label="Criar nova pasta">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/><path d="M2 10h20"/></svg>
          <span class="btn__label">Nova pasta</span>
        </button>
        <button type="button" id="btnCreatePrompt" class="btn btn--primary btn--with-icon" title="Criar novo prompt" aria-label="Criar novo prompt">
          <span class="btn__icon-only" aria-hidden="true">+</span>
          <span class="btn__label">+ Novo prompt</span>
        </button>
        <button type="button" id="btnImportFolder" class="btn btn--icon btn--icon-square btn--sm" title="Importar pasta" aria-label="Importar pasta" style="display:none">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
        </button>
        <span id="promptCounter" class="header__counter">0/5</span>
      </div>
    </header>

    <!-- =========================
        Main Content
    ========================= -->
    <main id="mainContent" class="main">
      <div class="loading-state" style="display:none">Carregando...</div>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <div class="footer__left">
        <span id="userPlanBadge" class="badge badge--free" data-plan="free">Free</span>
      </div>
      <span class="footer__copyright">Prompt Drive ¬© 2026</span>
      <div class="footer__right">
        <div class="footer__actions">
          <button type="button" id="btnLicenseKey" class="btn btn--icon btn--icon-circle btn--sm" title="Serial Key" aria-label="Serial Key">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/></svg>
          </button>
          <button type="button" class="btn btn--ghost" data-action="logout">Sair</button>
        </div>
      </div>
    </footer>
    </div>
  </div>

  <!-- Dialogs -->
  <!-- Create Folder Dialog -->
  <div class="dialog-overlay" id="folderDialog" role="dialog" aria-labelledby="folderDialogTitle" aria-modal="true" aria-hidden="true" hidden>
    <div class="dialog">
      <h2 id="folderDialogTitle" class="dialog__title">Criar pasta</h2>
      <form id="folderForm" class="dialog__form" data-action="submit-folder">
        <div class="form-group">
          <label for="folderName">Nome da pasta</label>
          <input type="text" id="folderName" name="folderName" required autocomplete="off">
        </div>
        <div class="dialog__actions">
          <button type="button" class="btn btn--ghost" data-action="close-folder">Cancelar</button>
          <button type="submit" class="btn btn--primary">Criar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Edit Folder Dialog -->
  <div class="dialog-overlay" id="editFolderDialog" role="dialog" aria-labelledby="editFolderDialogTitle" aria-modal="true" aria-hidden="true" hidden>
    <div class="dialog">
      <h2 id="editFolderDialogTitle" class="dialog__title">Editar pasta</h2>
      <form id="editFolderForm" class="dialog__form" data-action="submit-edit-folder">
        <input type="hidden" id="editFolderId" name="folderId">
        <div class="form-group">
          <label for="editFolderName">Nome da pasta</label>
          <input type="text" id="editFolderName" name="folderName" required autocomplete="off">
        </div>
        <div class="dialog__actions">
          <button type="button" class="btn btn--ghost" data-action="close-edit-folder">Cancelar</button>
          <button type="submit" class="btn btn--primary">Salvar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Delete Folder Dialog -->
  <div class="dialog-overlay" id="deleteFolderDialog" role="dialog" aria-labelledby="deleteFolderDialogTitle" aria-modal="true" aria-hidden="true" hidden>
    <div class="dialog">
      <h2 id="deleteFolderDialogTitle" class="dialog__title">Excluir pasta</h2>
      <div class="dialog__body">
        <div class="delete-folder-preview">
          <span class="delete-folder-preview__icon">üìÅ</span>
          <span id="deleteFolderName" class="delete-folder-preview__name"></span>
        </div>
        <p class="dialog__warning">Todos os prompts desta pasta ser√£o exclu√≠dos permanentemente.</p>
        <div class="form-group">
          <label for="deleteFolderConfirm">Digite o nome da pasta para confirmar:</label>
          <input type="text" id="deleteFolderConfirm" name="confirmName" autocomplete="off" placeholder="Nome exato da pasta">
        </div>
      </div>
      <div class="dialog__actions">
        <button type="button" class="btn btn--ghost" data-action="close-delete-folder">Cancelar</button>
        <button type="button" class="btn btn--danger" data-action="confirm-delete-folder">Excluir Pasta</button>
      </div>
    </div>
  </div>

  <!-- Create Prompt Dialog -->
  <div class="dialog-overlay" id="promptDialog" role="dialog" aria-labelledby="promptDialogTitle" aria-modal="true" aria-hidden="true" hidden>
    <div class="dialog dialog--wide">
      <h2 id="promptDialogTitle" class="dialog__title">Criar prompt</h2>
      <form id="promptForm" class="dialog__form" data-action="submit-prompt">
        <div class="form-group">
          <label for="promptFolder">Pasta</label>
          <select id="promptFolder" name="folderId" required></select>
        </div>
        <div class="form-group">
          <label for="promptName">Nome</label>
          <input type="text" id="promptName" name="nome" required autocomplete="off">
        </div>
        <div class="form-group">
          <label for="promptConteudo">Conte√∫do</label>
          <textarea id="promptConteudo" name="conteudo" rows="5" required></textarea>
          <div class="form-hint">
            Dica: Use vari√°veis no formato [nome] para tornar seus prompts mais flex√≠veis e reutiliz√°veis. Exemplo: 'Crie um post sobre [tema] para [plataforma]'
          </div>
        </div>
        <div class="dialog__actions">
          <button type="button" class="btn btn--ghost" data-action="close-prompt">Cancelar</button>
          <button type="submit" class="btn btn--primary">Criar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Edit Prompt Dialog -->
  <div class="dialog-overlay" id="promptEditDialog" role="dialog" aria-labelledby="promptEditDialogTitle" aria-modal="true" aria-hidden="true" hidden>
    <div class="dialog dialog--wide">
      <h2 id="promptEditDialogTitle" class="dialog__title">Editar prompt</h2>
      <form id="promptEditForm" class="dialog__form" data-action="submit-edit-prompt">
        <input type="hidden" id="promptEditId" name="promptId">
        <div class="form-group">
          <label for="promptEditFolder">Pasta</label>
          <select id="promptEditFolder" name="folderId" required></select>
        </div>
        <div class="form-group">
          <label for="promptEditName">Nome</label>
          <input type="text" id="promptEditName" name="nome" required autocomplete="off">
        </div>
        <div class="form-group">
          <label for="promptEditConteudo">Conte√∫do</label>
          <textarea id="promptEditConteudo" name="conteudo" rows="5" required></textarea>
          <div class="form-hint">
            Dica: Use vari√°veis no formato [nome] para tornar seus prompts mais flex√≠veis e reutiliz√°veis. Exemplo: 'Crie um post sobre [tema] para [plataforma]'
          </div>
        </div>
        <div class="dialog__actions">
          <button type="button" class="btn btn--ghost" data-action="close-edit-prompt">Cancelar</button>
          <button type="submit" class="btn btn--primary">Salvar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Confirm Delete Prompt Dialog -->
  <div class="dialog-overlay" id="confirmDeletePromptDialog" role="dialog" aria-labelledby="confirmDeletePromptTitle" aria-modal="true" aria-hidden="true" hidden>
    <div class="dialog">
      <h2 id="confirmDeletePromptTitle" class="dialog__title">Excluir prompt</h2>
      <p class="dialog__body">Tem certeza que deseja excluir este prompt?</p>
      <div class="dialog__actions">
        <button type="button" class="btn btn--ghost" data-action="close-confirm-delete-prompt">Cancelar</button>
        <button type="button" class="btn btn--danger" data-action="confirm-delete-prompt">Excluir</button>
      </div>
    </div>
  </div>

  <!-- License Dialog (benef√≠cios Free vs Pro + checkout Stripe) -->
  <div class="dialog-overlay" id="licenseDialog" role="dialog" aria-labelledby="licenseDialogTitle" aria-modal="true" aria-hidden="true" hidden>
    <div class="dialog">
      <h2 id="licenseDialogTitle" class="dialog__title">Assine o Pro</h2>
      <div class="dialog__body">
        <p class="dialog__intro">Compare os planos e assine o Pro para desbloquear todos os recursos.</p>
        <div class="plans-compare">
          <div class="plans-compare__col">
            <h3 class="plans-compare__title">Free</h3>
            <ul class="plans-compare__list">
              <li>At√© 5 prompts</li>
              <li>Pastas ilimitadas</li>
              <li>‚Äî</li>
            </ul>
          </div>
          <div class="plans-compare__col plans-compare__col--pro">
            <h3 class="plans-compare__title">Pro</h3>
            <ul class="plans-compare__list">
              <li>Prompts ilimitados</li>
              <li>Exportar e importar pastas</li>
              <li>Checkout seguro via Stripe</li>
            </ul>
          </div>
        </div>
      </div>
      <div class="dialog__actions">
        <button type="button" class="btn btn--ghost" data-action="close-license">Fechar</button>
        <button type="button" class="btn btn--primary" data-action="open-stripe-checkout">Ir para o checkout</button>
      </div>
    </div>
  </div>

  <!-- Import Dialog -->
  <div class="dialog-overlay" id="importDialog" role="dialog" aria-labelledby="importDialogTitle" aria-modal="true" aria-hidden="true" hidden>
    <div class="dialog dialog--wide">
      <h2 id="importDialogTitle" class="dialog__title">Importar pasta</h2>
      <form id="importForm" class="dialog__form" data-action="submit-import">
        <div class="form-group">
          <label for="importJson">JSON (cole ou selecione arquivo)</label>
          <textarea id="importJson" name="json" rows="10" placeholder='{"folder": {...}, "prompts": [...]}'></textarea>
        </div>
        <div class="form-group">
          <input type="file" id="importFile" accept=".json" data-action="import-file">
        </div>
        <div class="dialog__actions">
          <button type="button" class="btn btn--ghost" data-action="close-import">Cancelar</button>
          <button type="submit" class="btn btn--primary">Importar</button>
        </div>
      </form>
    </div>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite" aria-atomic="true" hidden></div>

  <!-- Scripts (Supabase usado apenas via fetch em api/) -->
  <script src="app/scripts/constants.js"></script>
  <script src="app/scripts/states.js"></script>
  <script src="app/scripts/utils.js"></script>
  <script src="app/api/storage.js"></script>
  <script src="app/api/auth.js"></script>
  <script src="app/api/userData.js"></script>
  <script src="app/api/folders.js"></script>
  <script src="app/api/prompts.js"></script>
  <script src="app/api/license.js"></script>
  <script src="app/core/seed.js"></script>
  <script src="app/core/boot.js"></script>
  <script src="app/core/folders.js"></script>
  <script src="app/core/prompts.js"></script>
  <script src="app/core/premium.js"></script>
  <script src="app/core/index.js"></script>
  <script src="app/scripts/render.js"></script>
  <script src="app/scripts/app/dialogs.js"></script>
  <script src="app/scripts/app/forms.js"></script>
  <script src="app/scripts/app/authHandlers.js"></script>
  <script src="app/scripts/app/ui.js"></script>
  <script src="app/scripts/app/index.js"></script>
</body>
</html>
